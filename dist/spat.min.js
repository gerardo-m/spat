class Spat{_translations;_defaultLanguage="en";_language;_languageDir="spat";_defineLanguage(){null==this._language&&(this._language=localStorage.getItem("language")),null==this._language&&(this._language=document.documentElement.lang),0==this._language.trim().length&&(this._language=this._defaultLanguage)}async _fetchLanguage(){this._defineLanguage();const e=this._languageDir+"/"+this._language+".json",t=await fetch(e);if(200!=t.status)return console.warn(`Language file not provided: ${this._language}`),this._language=void 0,void this._defineLanguage();localStorage.setItem("language",this._language),this._translations=await t.json()}async _replaceStrings(){await this._fetchLanguage();const e=Object.values(this._translations),t=Object.keys(this._translations);for(let a=0;a<t.length;a++){const n=document.getElementById(t[a]);null!=n&&this._processElement(n,e[a])}}_processElement(e,t){if("string"!=typeof t)Array.isArray(t)&&e.replaceChildren(...this._createNodesFromArray(t));else{var a=e.childNodes;for(let e=0;e<a.length;e++){const n=a[e];if(3===n.nodeType){n.nodeValue=t;break}}}}_createNodesFromArray(e){console.log("creating nodes");var t=[];for(let a=0;a<e.length;a++){const n=e[a],s=n.tag;if(null==s){const e=n.value||"";console.log(e),t.push(document.createTextNode(e));continue}const g=document.createElement(s),l=n.value;g.append(l),this._createAttributesForNode(g,n),t.push(g)}return t}_createAttributesForNode(e,t){const a=Object.keys(t);for(let n=0;n<a.length;n++){if("tag"==a[n]||"value"==a[n])continue;const s=t[a[n]];e.setAttribute(a[n],s)}}setLanguage(e){e!=this._language&&(this._language=e,this._replaceStrings())}setDefaultLanguage(e){this._defaultLanguage=e}setLanguageDirectory(e){this._languageDir=e}}function ready(e){"loading"!=document.readyState?e():document.addEventListener?document.addEventListener("DOMContentLoaded",e):document.attachEvent("onreadystatechange",(function(){"complete"==document.readyState&&e()}))}const spat=new Spat;ready((function(){spat._replaceStrings()}));